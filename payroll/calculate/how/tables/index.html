

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Help to calculate the income tax</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        label, select, input, button { margin: 10px 0; display: block; }
        table { border-collapse: collapse; width: 100%; margin-top: 20px; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .result { margin-top: 20px; }
    </style>
</head>
<body>
    <h1>Help to calculate the income tax</h1>
    <label for="income">Enter your annual taxable income ($):</label>
    <input type="number" id="income" placeholder="e.g. 60000">

    <label for="region">Select the province of employment:</label>
    <select id="region">
        <option value="">Make your selection</option>
        <option value="Canada">Canada</option>
        <option value="Alberta">Alberta</option>
        <option value="British Columbia">British Columbia</option>
        <option value="Manitoba">Manitoba</option>
        <option value="New Brunswick">New Brunswick</option>
        <option value="Newfoundland and Labrador">Newfoundland and Labrador</option>
        <option value="Northwest Territories">Northwest Territories</option>
        <option value="Nova Scotia">Nova Scotia</option>
        <option value="Nunavut">Nunavut</option>
        <option value="Ontario">Ontario</option>
        <option value="Prince Edward Island">Prince Edward Island</option>
        <option value="Quebec">Quebec</option>
        <option value="Saskatchewan">Saskatchewan</option>
        <option value="Yukon">Yukon</option>
        <option value="Outside Canada">Outside Canada</option>
    </select>

    <button onclick="calculateTax()">Calculate income tax</button>

    <div id="output" class="result"></div>

    <script>
        const federalBrackets = [
            { min: 0, max: 57375, rate: 0.14, constant: 0 },
            { min: 57375.01, max: 114750, rate: 0.205, constant: 3729 },
            { min: 114750.01, max: 177882, rate: 0.26, constant: 10377 },
            { min: 177882.01, max: 253414, rate: 0.29, constant: 15377 },
            { min: 253414.01, max: Infinity, rate: 0.33, constant: 25514 }
        ];

        const provinces = [
            "Alberta", "British Columbia", "Manitoba", "New Brunswick", "Newfoundland and Labrador",
            "Northwest Territories", "Nova Scotia", "Nunavut", "Ontario", "Prince Edward Island",
            "Quebec", "Saskatchewan", "Yukon"
        ];

        function calculateFederalTax(income) {
            for (let bracket of federalBrackets) {
                if (income >= bracket.min && income <= bracket.max) {
                    return {
                        tax: bracket.constant + bracket.rate * (income - bracket.min),
                        rate: bracket.rate,
                        constant: bracket.constant,
                        base: bracket.min
                    };
                }
            }
            return { tax: 0, rate: 0, constant: 0, base: 0 };
        }

        function calculateTax() {
            const income = parseFloat(document.getElementById("income").value);
            const region = document.getElementById("region").value;
            const output = document.getElementById("output");
            output.innerHTML = "";

            if (!income || !region) {
                output.innerHTML = "<p>Please enter income and select a region.</p>";
                return;
            }

            const federal = calculateFederalTax(income);

            if (region === "Canada") {
                let table = "<table><tr><th>Province/Territory</th><th>Federal Tax ($)</th><th>Federal Rate</th><th>Constant (K)</th><th>Taxable Amount</th></tr>";
                for (let prov of provinces) {
                    table += `<tr><td>${prov}</td><td>${federal.tax.toFixed(2)}</td><td>${(federal.rate * 100).toFixed(2)}%</td><td>${federal.constant}</td><td>${(income - federal.base).toFixed(2)}</td></tr>`;
                }
                table += "</table>";
                output.innerHTML = table;
            } else {
                output.innerHTML = `
                    <h3>Tax Breakdown for ${region}</h3>
                    <p><strong>Federal Tax:</strong> $${federal.tax.toFixed(2)}</p>
                    <p><strong>Rate:</strong> ${(federal.rate * 100).toFixed(2)}%</p>
                    <p><strong>Constant (K):</strong> $${federal.constant}</p>
                    <p><strong>Taxable Amount:</strong> $${(income - federal.base).toFixed(2)}</p>
                `;
            }
        }
    </script>
</body>
</html>
