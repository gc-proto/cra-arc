

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Personal tax credits returns (Form TD1)</title>
<style>
  body { font-family: Arial, sans-serif; margin: 40px; max-width: 800px; }
  label { display: block; margin-top: 15px; }
  input[type="number"], select { width: 100%; padding: 8px; margin-top: 5px; }
  button { margin-top: 20px; padding: 10px 15px; }
  .result { margin-top: 30px; padding: 15px; background-color: #f4f4f4; border-left: 4px solid #0078D4; }
  .result p { margin: 8px 0; }
  .hidden { display: none; }
</style>
</head>
<body>
<h2>Personal tax credits returns (Form TD1)</h2>
<p>Each year, certain personal tax credit amounts are indexed based on changes to the Consumer Price Index (CPI). Since only some of the amounts are indexed, the CRA recommends that you record separately in your payroll records each item shown on your employee’s TD1 form. This will allow you to automatically increase the applicable indexed claim amounts when necessary. This also means you will not have to ask your employees to file a new TD1 form when indexing applies.</p>

<label>Do you have a federal Form TD1 on file for this employee?</label>
<input type="radio" name="td1" value="yes" onclick="toggleFederal(true)"> Yes
<input type="radio" name="td1" value="no" onclick="toggleFederal(false)"> No

<label>Do you also have a provincial Form TD1 on file for this employee?</label>
  <input type="radio" name="provtd1" value="yes" onclick="toggleProvincial(true)"> Yes
  <input type="radio" name="provtd1" value="no" onclick="toggleProvincial(false)"> No
  
<div id="noMessage" class="hidden result">
 <p>You <strong>cannot</strong> use the option 1 – Indexing of personal amounts if you <strong>do not have a Form TD1 on file</strong> for your employee.</p>
</div>

<div id="provinceSection" class="hidden">
  <label>Select the province or territory</label>
  <select id="province" onchange="handleProvince()">
    <option value="">-- Make our selection --</option>
    <option value="Alberta">Alberta</option>
    <option value="British Columbia">British Columbia</option>
    <option value="Manitoba">Manitoba</option>
    <option value="New Brunswick">New Brunswick</option>
    <option value="Newfoundland and Labrador">Newfoundland and Labrador</option>
    <option value="Nova Scotia">Nova Scotia</option>
    <option value="Ontario">Ontario</option>
    <option value="Prince Edward Island">Prince Edward Island</option>
    <option value="Quebec">Quebec</option>
    <option value="Saskatchewan">Saskatchewan</option>
    <option value="Northwest Territories">Northwest Territories</option>
    <option value="Nunavut">Nunavut</option>
    <option value="Yukon">Yukon</option>    
  </select>
</div>

<div id="peiMessage" class="hidden result">
  <p><strong>No indexing applies to Prince Edward Island. The calculator is not applicable.</strong></p>
</div>

<div id="yearSection" class="hidden">
  <label>Select the calendar year:</label>
  <select id="year" onchange="federalSection();  provincialSection();">
    <option value="">-- Make your selection --</option>
    <option value="2025">2025</option>
    <option value="2024">2024</option>
    <option value="2023">2023</option>
  </select>
</div>

<div id="federalSection" class="hidden">
  <h3>Federal Form TD1</h3>
  <label>Enter the total claim amount reported on line 13 of the federal Form TD1 ($)
    <input type="number" id="fed1" step="0.01">
  </label>

  <div id="line2Section" class="hidden">
    <label>Enter the prior year BPANS (Nova Scotia only) ($)
      <input type="number" id="fed2" step="0.01">
    </label>
  </div>

  <div id="line3Section">
    <label>Enter the pension income amount reported on line 4 and the tuition (full-time and part-time) reported on line 5 of the federal Form TD1 ($)
      <input type="number" id="fed3" step="0.01">
    </label>
  </div>

  <button onclick="calculateFederal()">Calculate using the federal TD1 form</button>
 <div class="result" id="federalResult"></div>
</div>

  <div id="provincialSection" class="hidden">
  <h3>Provincial Form TD1 (if applicable)</h3>
  <label>Enter the total claim amount reported on line 13 of the provincial Form TD1 ($)
    <input type="number" id="prov1" step="0.01">
  </label>

  <div id="line2SectionProv" class="hidden">
    <label>Enter the prior year BPANS (Nova Scotia only) ($)
      <input type="number" id="prov2" step="0.01">
    </label>
  </div>

  <div id="line3SectionProv">
    <label>Enter the pension income amount reported on line 4 and the tuition (full-time and part-time) reported on line 5 of the provincial Form TD1 ($)
      <input type="number" id="prov3" step="0.01">
    </label>
  </div>

  <button onclick="calculateProvincial()">Calculate using the provincial TD1 form</button>
 <div class="result" id="provincialResult"></div>
</div>

<script>
const indexingRates = {
  "2023": {
    "Federal": 0.063, "Alberta": 0.06, "British Columbia": 0.06, "Manitoba": 0.07,
    "New Brunswick": 0.063, "Newfoundland and Labrador": 0.059, "Nova Scotia": null,
    "Northwest Territories": 0.063, "Nunavut": 0.063, "Ontario": 0.065,
    "Prince Edward Island": null, "Quebec": null, "Saskatchewan": 0.063, "Yukon": 0.063
  },
  "2024": {
    "Federal": 0.047, "Alberta": 0.042, "British Columbia": 0.05, "Manitoba": 0.052,
    "New Brunswick": 0.047, "Newfoundland and Labrador": 0.042, "Nova Scotia": null,
    "Northwest Territories": 0.047, "Nunavut": 0.047, "Ontario": 0.045,
    "Prince Edward Island": null, "Quebec": null, "Saskatchewan": 0.047, "Yukon": 0.047
  },
  "2025": {
    "Federal": 0.027, "Alberta": 0.02, "British Columbia": 0.028, "Manitoba": 0.012,
    "New Brunswick": 0.027, "Newfoundland and Labrador": 0.023, "Nova Scotia": 0.031,
    "Northwest Territories": 0.027, "Nunavut": 0.027, "Ontario": 0.028,
    "Prince Edward Island": null, "Quebec": null, "Saskatchewan": 0.027, "Yukon": 0.027
  }
};

function toggleFederal(hasTD1) {
  document.getElementById('provinceSection').classList.toggle('hidden', !hasTD1);
  document.getElementById('yearSection').classList.add('hidden');
  document.getElementById('federalSection').classList.add('hidden');
  document.getElementById('peiMessage').classList.add('hidden');
  document.getElementById('noMessage').classList.toggle('hidden', hasTD1);
}

function handleProvince() {
  const province = document.getElementById('province').value;
  const isPEI = province === 'Prince Edward Island';
  document.getElementById('peiMessage').classList.toggle('hidden', !isPEI);
  document.getElementById('yearSection').classList.toggle('hidden', isPEI || province === '');
  document.getElementById('federalSection').classList.add('hidden');
}

function showFederalSection() {
  const province = document.getElementById('province').value;
  const year = document.getElementById('year').value;
  const showFed2 = province === 'Nova Scotia';
  const hideFed3 = province === 'Ontario';

  document.getElementById('fed2Section').classList.toggle('hidden', !showLine2);
  document.getElementById('fed3Section').classList.toggle('hidden', hideLine3);
  document.getElementById('federalSection').classList.remove('hidden');
  document.getElementById('federalResult').innerHTML = '';
}

function federalSectionTCP() {
  const province = document.getElementById('province').value;
  const year = document.getElementById('year').value;
  const fed1 = parseFloat(document.getElementById('fed1').value) || 0;
  const fed2 = parseFloat(document.getElementById('fed2').value) || 0;
  const fed3 = parseFloat(document.getElementById('fed3').value) || 0;

  const useFed2 = province === 'Nova Scotia';
  const useFed3 = province !== 'Ontario';
  const actualFed2 = useFed2 ? fed2 : 0;
  const actualFed3 = useFed3 ? fed3 : 0;
  const fed4 = fed1 - actualFed2 - actualFed3;

  const indexFactor = indexingRates[year][province] || 0;
  const fed6 = Math.round(fed4 * indexFactor);
  const fed7 = actualFed2 + 263.00;
  const fed8 = actualFed3;
  const fed9 = fed6 + fed7 + fed8;

  let yukonNote = province === 'Yukon' ? '<p><em>Note: Yukon personal amounts are harmonized with federal values. Indexing does not directly apply.</em></p>' : '';

  document.getElementById('federalResult').innerHTML = `
    ${yukonNote}
    <h4>Calculation breakdown</h4>
    <p>Line 1: Total claim amount reported on line 13 of the federal Form TD1 = $${fed1.toFixed(2)}</p>
    <p>Line 2: Minus prior year BPANS = $${actualfed2.toFixed(2)} (Nova Scotia only)</p>
    <p>Line 3: Minus non-indexed amounts = $${actualfed3.toFixed(2)}</p>
    <p>Line 4: Amount subject to indexing = $${fed4.toFixed(2)} (line 1 minus line 2 and 3) </p>
    <p>Line 5: Indexing factor that applies for the year = ${indexFactor}</p>
    <p>Line 6: Indexed amount = $${fed6.toFixed(2)} (line 4 multiplied by line 5, rounded to the nearest dollar)</p>
    <p>Line 7: Current year BPANS = $${fed7.toFixed(2)} (to account for 2025 indexation)</p>
    <p>Line 8: Non-indexed amounts = $${fed8.toFixed(2)} (amount from line 3)</p>
    <p><strong>Line 9: Revised total of personal tax credits amounts = $${fed9.toFixed(2)}</strong> (line 6 plus line 7and 8)</p>
  `;
}
</script>
</body>
</html>
