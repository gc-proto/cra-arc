<!DOCTYPE html>
<!--[if lt IE 9]>
<html class="no-js lt-ie9" lang="en" dir="ltr">
   <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en" dir="ltr">
<!--<![endif]-->
<head>
<meta charset="utf-8">
<!-- Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW) wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html -->
<title>Payroll assisted compliance examination - Canada.ca</title>
<meta content="width=device-width,initial-scale=1" name="viewport">
<meta name="robots" content="noindex, follow">

<!-- Meta data--> 
<!-- Load closure template scripts --> 
<script type="text/javascript" src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_1_0/cdts/compiled/soyutils.js"></script> 
<script type="text/javascript" src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_1_0/cdts/compiled/wet-en.js"></script>
<link href="https://test.canada.ca/covid-19-guidance/proto/css/alpha-beta-banner.css" rel="stylesheet">
<link href="https://www.canada.ca/etc/designs/canada/wet-boew/m%C3%A9li-m%C3%A9lo/2023-10-mount-revelstoke.min.css" rel="stylesheet">
<link href="https://www.canada.ca/etc/designs/canada/wet-boew/css/theme.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
<!-- Write closure template --> 
<script type="text/javascript">
            document.write(wet.builder.refTop({
            }));
         </script>
</head>
<body vocab="http://schema.org/" typeof="WebPage" class="experimental">
<div id="def-top"> </div>
<!-- Write closure template --> 
<script type="text/javascript">
            var defTop = document.getElementById("def-top");
            defTop.outerHTML = wet.builder.top({
              lngLinks: [{
                lang: "fr",
                href: "#",
                text: "Français"
              }],
              breadcrumbs: [{
                title: "Canada.ca",
                href: "https://www.canada.ca/en.html"
              },{
                title: "Taxes",
                href: "https://www.canada.ca/en/services/taxes.html"
              },{
                title: "Payroll",
                href: "https://test.canada.ca/cra-arc/payroll/index.html"
              },
{
                title: "Payroll compliance and enforcement",
                href: "https://test.canada.ca/cra-arc/payroll/compliance/index.html"
              }
              ],
              search: true,
              siteMenu: true,
              showPreContent: true
            });
         </script>
<main role="main" property="mainContentOfPage" class="container">
<h1 property="name" id="wb-cont">Payroll assisted compliance examination</h1>
<div class="row">
  <div class="col-md-8">
  <div id="ajax-intro" class="bg-info">
<p>The payroll assisted compliance examination is a program that offers you support as a business or a self-employed worker to help you (as an employer) understand your payroll deducting, withholding, remitting, and reporting obligations and how to meet them. </p>

<p>The examination process is less invasive and focuses on specific payroll issues, providing you with an opportunity to voluntarily correct errors before facing penalty and interest charges.</p>
<details><summary>What are the benefits of the payroll assisted compliance examination</summary>
<p>The goal is to assist and guide you in complying with payroll laws.</p>

<p>The examination focuses on key payroll aspects such as correct payroll deductions (income tax, CPP, EI), accurate reporting on employee benefits, and proper T4 slip issuance. It ensures you are correctly remitting payroll taxes.</p>
<p>The CRA officer works with you to identify payroll discrepancies and provides feedback to help correct any issues. It is a cooperative process aimed at compliance improvement.</p>

<ul class="fa-ul">
<li><span class="fas fa-check fa-lg fa-li text-success"></span> This is your opportunity for corrections, it may help you avoid costly penalties by catching issues early. For example, if errors are identified, you are given the chance to correct them within a reasonable time, without facing significant penalties or interest charges. This could include adjusting payroll records or filing corrected slips.</li>
<li><span class="fas fa-check fa-lg fa-li text-success"></span> The CRA officer will provide education and resources for best practices in payroll administration. They may provide recommendations to help you maintain compliance in the future.</li>
<li><span class="fas fa-check fa-lg fa-li text-success"></span> The examination fosters a cooperative relationship with the CRA, rather than a confrontational one that might occur during a full examination.</li>
</ul>
</details>
 </div>
<h2>How the process works</h2>
  </div>
  <div class="col-md-4">
   <figure>
   
        <img src="https://www.canada.ca/content/canadasite/en/revenue-agency/campaigns/educational-trust-accounts-reviews/_jcr_content/par/mwsadaptiveimage/image.img.jpg/1714486035669.jpg" alt="Two individuals standing around a table in a small business setting, focusing on a laptop screen." class="img-responsive cq-dd-image" data-emptytext="Image">
    
</figure> 
  </div>
</div>

<ol class="lst-stps ld-zr stps-strpd">
  <li >
    <h3>Your account is selected for examination</h3>
  <div id="ajax-step1a" class="bg-info"> 
   <p class="mrgn-tp-md mrgn-bttm-md"><span class="far fa-clock mrgn-rght-sm"></span><strong>Timeline:</strong> Day 1</p>
    <p id="step1">The CRA may contact you (or your authorized representative) to inform you that your <a href="#account" aria-controls="mid-screen" class="overlay-lnk" role="button">payroll program account&nbsp;<span class="far fa-question-circle"></span></a> has been selected for examination.</p>
 </div>
<div data-ajax-replace="https://test.canada.ca/cra-arc/payroll/compliance/trust-accounts-examinations.html#ajax-authorized-rep"></div>
 <div id="ajax-step1b" class="bg-info"> 
 <p>This examination helps confirm that income amounts, deductions, and credits are reported correctly and can be properly supported.</p>

 <details><summary>How the CRA may select your account</summary>
<p>The CRA may select your account based on various factors, including but not limited to the following:</p>
 <ul class="fa-ul mrgn-bttm-lg">

<li><span class="fas fa-check fa-li fa-lg text-success"> </span> You have <strong>not previously</strong> been selected for a payroll examination</li>
<li><span class="fas fa-check fa-li fa-lg text-success"> </span> Your payroll account was opened for <strong>less than 5 years</strong></li>
<li><span class="fas fa-check fa-li fa-lg text-success"> </span> You <strong>do not</strong> have related <strong>corporations or entities</strong></li>
<li><span class="fas fa-check fa-li fa-lg text-success"> </span> You have <strong>less than $ 1 million</strong> in salaries </li>
</ul>
 </details>
   </div>
     <h4>Methods the CRA may contact you</h4>
    <div class="wb-tabs">
      <div class="tabpanels">
        <details class="panel">
          <summary class="mrgn-bttm-md"><span class="fas fa-phone fa-xl mrgn-rght-sm"></span> By phone</summary>
<div data-ajax-replace="https://test.canada.ca/cra-arc/payroll/compliance/trust-accounts-examinations.html#ajax-step1a"></div>
 </details>
        <details class="panel">
          <summary><span class="fas fa-envelope fa-xl mrgn-rght-sm"></span> By sending a letter</summary>
<div data-ajax-replace="https://test.canada.ca/cra-arc/payroll/compliance/trust-accounts-examinations.html#ajax-step1b"></div>
   </details>
      </div>
    </div> 
<div data-ajax-replace="https://test.canada.ca/cra-arc/payroll/compliance/trust-accounts-examinations.html#ajax-step1c"></div>
      </li>
  
<li >
    <h3 id="step2">Preparing for the examination</h3>
    <p class="mrgn-tp-md mrgn-bttm-md"><span class="far fa-clock mrgn-rght-sm"></span><strong>Target timeline:</strong> Generally, up to 15 days</p>
<div data-ajax-replace="https://test.canada.ca/cra-arc/payroll/compliance/trust-accounts-examinations.html#ajax-step2a"></div>

<details class="mrgn-tp-md"><summary><i class="fas fa-tasks mrgn-rght-sm fa-lg"></i> <strong>Checklist</strong> - Help to prepare for the examination</summary>

 <h4 class="mrgn-tp-md">Checklist - Help to prepare for the examination&emsp;</h4>
    <div id="ajax-list">
      <div class="wb-frmvld">
        <p class="mrgn-tp-lg">Select all of the following to make sure you are ready for the payroll and GST/HST examination:</p>
        <div class="form-group">
          <fieldset class="gc-chckbxrdio">
            <ul class="checkbox-lg checkbox-zebra gc-chckbxrdio">
              <li class="checkbox mrgn-bttm-lg">
                <input type="checkbox" id="eg1" name="action-checkbox" >
                <label for="eg1">Gather your books and records</label>
                <div id="eg1-ex" class="mrgn-lft-xl">
                  <details class="mrgn-lft-xl" id="eg1-ex-details">
                    <summary>Types of books and records</summary>
                    <div data-ajax-replace="https://test.canada.ca/cra-arc/payroll/compliance/trust-accounts-examinations.html#ajax-documents"></div>
                  </details>
                </div>
              </li>
              <li class="checkbox mrgn-bttm-lg">
                <input type="checkbox" id="eg4" name="action-checkbox" >
                <label for="eg4">Review the relationship with the employer or the payer</label>
                <div id="eg4-ex" class="mrgn-lft-xl">
                  <p class="mrgn-lft-xl">Learn more  to understand the factors CRA considers when determining a worker's employment status and to information on workers with their own corporations (personal services businesses): <a href="https://www.canada.ca/en/revenue-agency/services/tax/businesses/topics/payroll/determine-relationship-employer-payer.html">Determine the relationship with the employer or the payer</a></p>
                </div>
              </li>
              <li class="checkbox mrgn-bttm-lg">
                <input type="checkbox" id="eg3" name="action-checkbox" >
                <label for="eg3"> Verify source deductions (income tax, CPP, EI) are correct</label>
                <div id="eg3-ex" class="mrgn-lft-xl">
                  <p class="mrgn-lft-xl">Learn more: <a href="https://www.canada.ca/en/revenue-agency/services/tax/businesses/topics/payroll/calculating-deductions.html">Calculate payroll deductions and contributions</a></p>
                </div>
              </li>
              <li class="checkbox mrgn-bttm-lg">
                <input type="checkbox" id="eg6" name="action-checkbox" >
                <label for="eg6"> Review taxable benefits and make sure they are reported</label>
                <div id="eg6-ex" class="mrgn-lft-xl">
                  <p class="mrgn-lft-xl">Learn more: <a href="https://www.canada.ca/en/revenue-agency/services/tax/businesses/topics/payroll/benefits-allowances/benefits-allowances-chart.html">Determine if a benefit is taxable</a></p>
                </div>
              </li>
              <li class="checkbox mrgn-bttm-lg">
                <input type="checkbox" id="eg7" name="action-checkbox" >
                <label for="eg7">Make sure all remittances are on time and accurately made</label>
                <div id="eg7-ex" class="mrgn-lft-xl">
                  <p class="mrgn-lft-xl">Learn more: <a href="https://www.canada.ca/en/revenue-agency/services/tax/businesses/topics/payroll/remitting-source-deductions.html">Remit (pay) payroll deductions and contributions</a></p>
                </div>
              </li>
              <li class="checkbox mrgn-bttm-lg">
                <input type="checkbox" id="eg2" name="action-checkbox" >
                <label for="eg2">Make sure slips and summaries are accurate and up to date</label>
                <div id="eg2-ex" class="mrgn-lft-xl">
                  <p class="mrgn-lft-xl">Learn more: <a href="https://www.canada.ca/en/revenue-agency/services/tax/businesses/topics/payroll/completing-filing-information-returns.html">Fill out the slips and summaries</a></p>
                </div>
              </li>
              <li class="checkbox mrgn-bttm-lg">
                <input type="checkbox" id="eg8" name="action-checkbox" >
                <label for="eg8">Prepare documentation for any amendments or corrections </label>
                <div id="eg8-ex" class="mrgn-lft-xl">
                  <p class="mrgn-lft-xl">Learn more: <a href="https://www.canada.ca/en/revenue-agency/services/tax/businesses/topics/payroll/file-information-returns-slip-summaries/make-corrections-after-filing.html">Make corrections after filing</a></p>
                </div>
              </li>
              <li class="checkbox mrgn-bttm-lg">
                <input type="checkbox" id="eg10" name="action-checkbox" >
                <label for="eg10"> Prepare for questions on workers’ compensation or health taxes (if applicable)</label>
                <div id="eg10-ex" class="mrgn-lft-xl">
                  <p class="mrgn-lft-xl">Learn more: <a href="https://www.canada.ca/en/revenue-agency/services/tax/businesses/topics/payroll/payroll-deductions-contributions/special-payments/workers-compensation-claims.html">Workers’ compensation claims</a></p>
                </div>
              </li>
            </ul>
            <div class="alert alert-info provisional mrgn-tp-lg" id="action-default-msg">
              <h3><small>Status </small><br>
                Complete this checklist to make sure you you are prepared for the examination</h3>
            </div>
            <div class="alert alert-warning hidden provisional" id="action-not-qualify-msg">
              <h3><small>Your status </small><br>
                Continue to complete this checklist to make sure you are prepared for the examination </h3>
            </div>
            <div class="alert alert-success hidden provisional" id="action-qualify-msg">
              <h3><small>Your status </small><br>
                You are prepared and ready for the examination</h3>
            </div>
          </fieldset>
        </div>
      </div>
    </div>
</details>

<div data-ajax-replace="https://test.canada.ca/cra-arc/payroll/compliance/trust-accounts-examinations.html#ajax-step2b"></div>
<div data-ajax-replace="https://test.canada.ca/cra-arc/payroll/compliance/trust-accounts-examinations.html#ajax-step2c"></div>
<div data-ajax-replace="https://test.canada.ca/cra-arc/payroll/compliance/trust-accounts-examinations.html#ajax-step2d"></div>

     
  </li>
  <li >
    <h3 id="step3">Examination of your books and records</h3>
    <p class="mrgn-tp-md mrgn-bttm-md"><span class="far fa-clock mrgn-rght-sm"></span><strong>Target timeline:</strong> Generally, up to 30 days</p>
  <div data-ajax-replace="https://test.canada.ca/cra-arc/payroll/compliance/trust-accounts-examinations.html#ajax-step3a"></div>

    <h4>Methods of the examination</h4>
    <div class="wb-tabs">
      <div class="tabpanels">
        <details class="panel">
          <summary><span class="fas fa-user-friends mrgn-rght-sm"></span> In-person examination</summary>
         
<div data-ajax-replace="https://test.canada.ca/cra-arc/payroll/compliance/trust-accounts-examinations.html#ajax-step3b"></div>
</details>
        <details class="panel">
          <summary> <span class="fas fa-headset fa-xl mrgn-rght-sm"></span> Online examination</summary>
         <div data-ajax-replace="https://test.canada.ca/cra-arc/payroll/compliance/trust-accounts-examinations.html#ajax-step3c"></div>
        </details>
      </div>
    </div>
  </li>

  
  <li ><h3 id="step5"> Results of the examination</h3>
    <p class="mrgn-tp-md mrgn-bttm-md"><span class="far fa-clock mrgn-rght-sm"></span><strong>Target timeline:</strong> Generally, up to 30 days</p>
<ol class="lst-stps-sub ld-zr stps-strpd">
  <li> <div data-ajax-replace="https://test.canada.ca/cra-arc/payroll/compliance/trust-accounts-examinations.html#ajax-step4a"></div>
 <div data-ajax-replace="https://test.canada.ca/cra-arc/payroll/compliance/trust-accounts-examinations.html#ajax-step4b"></div>
</li>
 <li><div id="ajax-step4a" class="bg-info"> 
 <p>If the CRA officer identified payroll discrepancies, they will work with you (or your authorized representative) to help correct them. This is your <strong>opportunity for corrections</strong>, it may <strong>help you avoid penalties</strong>.</p>  

<h4> <span class="far fa-calendar-alt mrgn-rght-sm"></span> When to make corrections</h4>
<p>Generally, the CRA officer will provide you <strong>30 days</strong> from the day of this discussion to make <strong>all required corrections</strong>.</p> 

<h5>What if you need more time</h5>
<p>If you cannot make the corrections requested by the due date, call the CRA officer within <strong>30 days</strong> from the due date to let them know you need more time. The CRA officer may provide an extension to self-correct any discrepancies identified.</p>

 <p class="mrgn-tp-md">To determine the due date, use the: <a href="#modal_date_calc"  aria-controls="mid-screen-bg" role="button" class="overlay-lnk btn btn-primary btn-lg" role="button"><i class="fa fa-calendar-check mrgn-rght-sm"></i>Date calculator</a></p>

<p>If you either:</p> 
   
        <dl class="dl-horizontal mrgn-lft-md">
          <dt><span class="fas fa-check fa-lg text-success"></span> Make all corrections</dt>
          <dd> 
            <p> You may be <strong>eligible for proactive penalty and interest relief</strong> if you <strong>make all corrections</strong> requested by the due date.</p>
	  </dd>
          <dt><span class="fas fa-ban fa-lg text-danger"></span> Do not make all corrections</dt>
          <dd><p>The CRA officer will make the <strong>adjustments required</strong> and will assess your tax payable based on the information they have if you <strong>do not</strong> make all corrections.</p> 
<p>  <strong>Penalties will apply</strong> to the amount the CRA assess. Interest accumulates on overdue balances.</p> 
	  </dd>
        </dl>

 <p class="mrgn-tp-md">Learn more on how to amend or add slips: <a href="https://test.canada.ca/cra-arc/payroll/file/amend.html">Amend, cancel, add, or replace slips and summaries</a> </p>

</div>
</li>
<li> <div data-ajax-replace="https://test.canada.ca/cra-arc/payroll/compliance/trust-accounts-examinations.html#ajax-step4d"></div></li>
<li><div data-ajax-replace="https://test.canada.ca/cra-arc/payroll/compliance/trust-accounts-examinations.html#ajax-step4e"></div>	</li>
</ol>	
  </li>
 <li >  <h3 id="step6">Option to request to cancel or waive penalties and interest (taxpayer relief)</h3>
 <div data-ajax-replace="https://test.canada.ca/cra-arc/payroll/compliance/trust-accounts-examinations.html#ajax-step4f"></div>
 </li>
  
  <li >    <h3 id="step7">Option to appeal if you disagree</h3>
    <p class="mrgn-tp-md mrgn-bttm-md"><span class="far fa-clock mrgn-rght-sm"></span><strong>Timeline:</strong> Within 90 days of the <abbr title="Notice of assessment">NOA</abbr></p>
   <div data-ajax-replace="https://test.canada.ca/cra-arc/payroll/compliance/trust-accounts-examinations.html#ajax-step5a"></div>
  </li>
</ol>

 <h2 id="ref">References</h2>
  <div class="row">
    <div class="col-md-8">
      <h3 id="h_6_1">Related</h3>
      <ul>
    
       
        <li><a href="https://www.canada.ca/en/revenue-agency/services/about-canada-revenue-agency-cra/protecting-your-privacy/privacy-impact-assessment/trust-accounts-examination.html">Privacy Impact Assessment - Trust Accounts Examination</a></li>
        <li><a href="https://www.canada.ca/en/revenue-agency/corporate/about-canada-revenue-agency-cra/access-information-privacy-canada-revenue-agency/appendix.html#188">Employer compliance class of records -  CRA CVB 188</a></li>
        <li><a href="https://www.canada.ca/en/revenue-agency/corporate/about-canada-revenue-agency-cra/access-information-privacy-canada-revenue-agency/info-source-appendix.html#PPU120">Employer compliance personal information bank -  CRA PPU 120</a></li>
      </ul>

 <div data-ajax-replace="https://test.canada.ca/cra-arc/payroll/compliance/trust-accounts-examinations.html#ajax-ref"></div>
</div>
 <div class="col-md-4">
      <figure class="well">
        <h3 class="mrgn-tp-0"><span class="fas fa-video mrgn-rght-sm"></span>Video: Webinar recording</h3>
        <div class="row">
          <div class="col-xs-12"> <span class="small well well-sm pstn-rght-xs pstn-bttm-xs mrgn-bttm-lg mrgn-rght-lg brdr-rds-0" aria-hidden="true"></span> <img alt="" src="https://www.canada.ca/content/dam/cra-arc/serv-info/videos/bsnss/pyrll-xmntn-en.jpg"
class="img-responsive"> </div>
        </div>
        <figcaption class="caption">
          <p class="h4">What to expect during a Payroll Examination 2.0</p>
          <p class="mrgn-tp-sm">Learn about payroll compliance, including the payroll examination processes. </p>
          <p><a href="https://www.canada.ca/en/revenue-agency/news/cra-multimedia-library/businesses-video-gallery/expect-during-payroll-examination.html"
class="btn btn-primary stretched-link"><span class="far fa-play-circle mrgn-rght-sm"></span>Launch video<span class="wb-inv">: What to expect during a Payroll Examination 2.0</span></a></p>
        </figcaption>
      </figure>
    </div>
  </div>
<section id="account" class="wb-overlay modal-content overlay-def wb-popup-mid">
  <header class="modal-header">
    <h2 class="modal-title">What is a payroll program account</h2>
  </header>
  <div class="modal-body">
    <div data-ajax-replace="https://test.canada.ca/cra-arc/payroll/register/what.html #ajax-account"></div>
  </div>
</section>

<section id="req-documents" class="wb-overlay modal-content overlay-def wb-popup-mid">
  <header class="modal-header">
    <h2 class="modal-title">Books and records the CRA officer may ask you</h2>
  </header>
  <div class="modal-body">
    <div data-ajax-replace="https://test.canada.ca/cra-arc/payroll/compliance/trust-accounts-examinations.html#ajax-documents"></div>
  </div>
</section>


<div id="def-preFooter"></div>
<!-- Write closure template --> 
<script type="text/javascript">
               var defPreFooter = document.getElementById("def-preFooter");
               defPreFooter.outerHTML = wet.builder.preFooter({
               dateModified: "2020-03-13",
               showPostContent: true,
               showFeedback: true,
               showShare: true
               });
            </script>

<script type="text/javascript">
            document.write(wet.builder.refFooter({
            }));
         </script> 
<script src="https://test.canada.ca/covid-19-guidance/proto/js/alpha-banner.js"></script> 
<script src="https://test.canada.ca/covid-19-guidance/proto/js/alpha-banner.js"></script> 
<script src="https://test.canada.ca/covid-19-guidance/proto/js/alpha-banner.js"></script> 
<script src="https://www.canada.ca/etc/designs/canada/wet-boew/méli-mélo/2023-10-mount-revelstoke.min.js"></script> 
<script defer>
       "use strict";
       
       // Function to update the visibility of messages based on checkboxes
       function updateChkbx() {
           // Get all checkboxes
           let checkboxes = document.querySelectorAll("input[type=checkbox][name=action-checkbox]");
           // Get all checked checkboxes
           let checked = document.querySelectorAll("input[type=checkbox][name=action-checkbox]:checked");
           
           // Elements to show/hide based on the checkbox state
           let defaultMsg = document.getElementById("action-default-msg");
           let qualifyMsg = document.getElementById("action-qualify-msg");
           let notQualifyMsg = document.getElementById("action-not-qualify-msg");

           // Hide all messages first
           defaultMsg.classList.add("hidden");
           qualifyMsg.classList.add("hidden");
           notQualifyMsg.classList.add("hidden");

           // Show the appropriate message
           if (checked.length === 0) {
               defaultMsg.classList.remove("hidden");
           } else if (checkboxes.length === checked.length) {
               qualifyMsg.classList.remove("hidden");
           } else {
       notQualifyMsg.classList.remove("hidden");
   }
}

// Call updateChkbx when the page loads to set the initial state
window.onload = updateChkbx;

// Attach the updateChkbx function to the change event for the checkboxes
document.querySelectorAll("input[type=checkbox][name=action-checkbox]").forEach(function (checkbox) {
   checkbox.addEventListener("change", updateChkbx);
});
</script> 
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> 
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script> 
<script>
   // Function to check if a date is a weekend
   function isWeekend(date) {
       const day = date.getDay();
       return (day === 0 || day === 6); // 0 = Sunday, 6 = Saturday
   }
   // Function to calculate date after amount of time
   function calculateDate() {
       const startDate = new Date(document.getElementById("date_calc_from1").value);
       const elapsed = parseInt(document.getElementById("date_calc_elapsed").value);
       const unit = document.getElementById("date_calc_unit").value;
       const direction = document.getElementById("date_calc_dir").value === "true"; // true = future, false = past
       let resultDate = new Date(startDate); // Start from this date
       if (isNaN(startDate) || isNaN(elapsed)) {
           alert("Please enter a valid start date and elapsed time.");
           return;
       }
       // Adding time based on the selected unit
       if (unit === "days") {
           resultDate = addDays(resultDate, elapsed, direction, false);
       } else if (unit === "work") {
           resultDate = addDays(resultDate, elapsed, direction, true);
       } else if (unit === "weeks") {
           resultDate.setDate(resultDate.getDate() + (direction ? elapsed * 7 : -elapsed * 7));
       } else if (unit === "months") {
           resultDate.setMonth(resultDate.getMonth() + (direction ? elapsed : -elapsed));
       } else if (unit === "years") {
           resultDate.setFullYear(resultDate.getFullYear() + (direction ? elapsed : -elapsed));
       }
       // Display the result
       document.getElementById("date_calc_opt1_result").classList.remove('hidden');
       document.getElementById("date_calc_opt1_result").getElementsByTagName('p')[0].innerHTML = formatDate(resultDate);
   }
   // Helper function to add or subtract days, with an option for business days
   function addDays(date, days, forward = true, businessDays = false) {
       let direction = forward ? 1 : -1;
       while (days > 0) {
           date.setDate(date.getDate() + direction);
           if (!businessDays || !isWeekend(date)) {
               days--;
           }
       }
       return date;
   }
   // Helper function to format date as: Sunday, October 14, 2024
   function formatDate(date) {
       const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
       return date.toLocaleDateString(undefined, options);
   }
   // Function to calculate business days between two dates
   function calculateBusinessDays() {
       const startDate = new Date(document.getElementById("date_calc_from2").value);
       const endDate = new Date(document.getElementById("date_calc_to2").value);
       const resultText = document.getElementById("resultText");
       // Check for valid date inputs
       if (isNaN(startDate) || isNaN(endDate)) {
           resultText.innerHTML = "Please select valid start and end dates.";
           document.getElementById("date_calc_opt2_result").classList.remove('hidden');
           return;
       }
       // Check if start date is greater than end date
       if (startDate > endDate) {
           resultText.innerHTML = "End date must be after the start date.";
           document.getElementById("date_calc_opt2_result").classList.remove('hidden');
           return;
       }
       let businessDaysCount = 0;
       let currentDate = new Date(startDate);
       while (currentDate <= endDate) {
           if (!isWeekend(currentDate)) {
               businessDaysCount++;
           }
           currentDate.setDate(currentDate.getDate() + 1);
       }

   resultText.innerHTML = businessDaysCount + " business days";
   
 document.getElementById("date_calc_opt2_result").classList.remove('hidden');
   }

	
// Function to reset all entered values and results
function clearForm(formId) {
   // Reset the form inputs
   document.getElementById(formId).reset();
   // Hide the result for the respective tab
   if (formId === 'form_date_calc_opt1') {
       document.getElementById("date_calc_opt1_result").classList.add('hidden'); // Hide result for first tab
       document.getElementById("date_calc_opt1_result").getElementsByTagName('p')[0].innerHTML = ""; // Clear result text for first tab
   } else if (formId === 'form_date_calc_opt2') {
       document.getElementById("date_calc_opt2_result").classList.add('hidden'); // Hide result for second tab
       document.getElementById("resultText").innerHTML = ""; // Clear result text for second tab
   }
}
// Function to reset both forms
function resetModalForms() {
   clearForm('form_date_calc_opt1');
   clearForm('form_date_calc_opt2');
}
// Bind the Bootstrap modal's 'hidden' event to reset forms when the modal is closed
$('#modal_date_calc').on('hidden.bs.modal', function () {
   resetModalForms();
});
</script>
</main>
<div id="def-footer"> </div>
<!-- Write closure template --> 
<script type="text/javascript">
            var defFooter = document.getElementById("def-footer");
            defFooter.outerHTML = wet.builder.footer({
            showFooter: true,
            showFeatures: true
            });
         </script> 
<!-- Write closure template --> 
<script type="text/javascript">
            document.write(wet.builder.refFooter({
            }));
         </script> 
<script src="https://test.canada.ca/covid-19-guidance/proto/js/alpha-banner.js"></script> 
<script src="https://test.canada.ca/covid-19-guidance/proto/js/alpha-banner.js"></script> 
<script src="https://test.canada.ca/covid-19-guidance/proto/js/alpha-banner.js"></script> 
<script src="https://www.canada.ca/etc/designs/canada/wet-boew/méli-mélo/2023-10-mount-revelstoke.min.js"></script> 


<section id="modal_date_calc" class="wb-overlay modal-content overlay-def wb-popup-mid">
  <header class="modal-header">
    <h2 class="modal-title"><i class="fa fa-calculator"></i>&emsp; Date calculator</h2>
  </header>
  <div class="modal-body">
    <div class="wb-tabs ignore-session">
      <div class="tabpanels">
        <details id="date_calc_opt1" open="open">
          <summary>Date after amount of time</summary>
          <form id="form_date_calc_opt1">
            <div class="container-fluid">
              <div class="form-group row">
                <div class="col-md-2">
                  <label for="date_calc_from1">Start date <span class="datepicker-format">(<abbr title="Four digits year, dash, two digits month, dash, two digits day">YYYY-MM-DD</abbr>)</span></label>
                  <input class="form-control" type="date" id="date_calc_from1" name="date_calc_from" min="1900-01-01" max="2050-01-01" required/>
                </div>
                <div class="col-md-10">
                  <label for="date_calc_elapsed">Elapsed time</label>
                  <div class="input-group">
                    <input type="number" id="date_calc_elapsed" class="form-control input-lg brdr-rds-2 num" placeholder="Enter the amount of time" min="1" max="3653" required>
                    <span class="input-group-btn">
                    <select id="date_calc_unit" class="btn btn-lg btn-default" title="Temporal unit" required>
                      <option value="days" selected>Days</option>
                      <option value="work">Business days</option>
                      <option value="weeks">Weeks</option>
                      <option value="months">Months</option>
                      <option value="years">Years</option>
                    </select>
                    </span> <span class="input-group-btn">
                    <select id="date_calc_dir" class="btn btn-lg btn-default" title="Temporal direction" required>
                      <option value="true" selected>In the future</option>
                      <option value="false">In the past</option>
                    </select>
                    </span> </div>
                </div>
              </div>
              <div id="date_calc_opt1_result" class="alert alert-info row hidden">
                <div class="col-md-11 mrgn-lft-sm">
                  <h3>Your result - The calculated date is:</h3>
                  <p></p>
                </div>
              </div>
              <div class="mrgn-tp-lg mrgn-bttm-md">
                <button type="button" class="btn btn-lg btn-primary mrgn-rght-sm" onclick="calculateDate()">Calculate</button>
                <button type="button" class="btn btn-lg btn-default" onclick="clearForm('form_date_calc_opt1')">Clear</button>
              </div>
            </div>
          </form>
        </details>
        <details id="date_calc_opt2">
          <summary>Elapsed time between 2 dates</summary>
          <form id="form_date_calc_opt2">
            <div class="container-fluid">
              <div class="form-group row">
                <div class="col-md-2">
                  <label for="date_calc_from2">Start date <span class="datepicker-format">(<abbr title="Four digits year, dash, two digits month, dash, two digits day">YYYY-MM-DD</abbr>)</span></label>
                  <input class="form-control" type="date" id="date_calc_from2" name="date_calc_from" min="1900-01-01" max="2050-01-01" required>
                </div>
                <div class="col-md-10">
                  <label for="date_calc_to2">End date <span class="datepicker-format">(<abbr title="Four digits year, dash, two digits month, dash, two digits day">YYYY-MM-DD</abbr>)</span></label>
                  <input class="form-control" type="date" id="date_calc_to2" name="date_calc_to" min="1900-01-01" max="2050-01-01" required>
                </div>
              </div>
              <div id="date_calc_opt2_result" class="alert alert-info row hidden">
                <div class="col-md-11 mrgn-lft-sm">
                  <h3>Your result - Elapsed number of business days:</h3>
                  <p id="resultText"> </p>
                </div>
              </div>
              <div class="mrgn-tp-lg mrgn-bttm-md">
                <button type="button" class="btn btn-lg btn-primary mrgn-rght-sm" onclick="calculateBusinessDays()">Calculate</button>
                <button type="button" class="btn btn-lg btn-default" onclick="clearForm('form_date_calc_opt2')">Clear</button>
              </div>
            </div>
          </form>
        </details>
      </div>
    </div>
  </div>
</section>
</body>
</html>
